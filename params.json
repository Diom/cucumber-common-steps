{"name":"Cucumber Common Steps","tagline":"Cucumber common steps definitions","body":"[![Build Status](https://travis-ci.org/cchacin/cucumber-common-steps.svg?branch=master)](https://travis-ci.org/cchacin/cucumber-common-steps.svg?branch=master)\r\n[![Coverage Status](https://img.shields.io/coveralls/cchacin/cucumber-common-steps.svg)](https://coveralls.io/r/cchacin/cucumber-common-steps?branch=master)\r\n[![Stories in Ready](https://badge.waffle.io/cchacin/cucumber-common-steps.svg?label=ready&title=Ready)](http://waffle.io/cchacin/cucumber-common-steps)\r\n[![Dependency Status](https://www.versioneye.com/user/projects/5407630bccc023c90d000098/badge.svg)](https://www.versioneye.com/user/projects/5407630bccc023c90d000098)\r\n[![Maven Central](https://maven-badges.herokuapp.com/maven-central/com.github.cchacin/cucumber-common-steps/badge.svg)](https://maven-badges.herokuapp.com/maven-central/com.github.cchacin/cucumber-common-steps)\r\n\r\nCucumber Common Steps\r\n=====================\r\n\r\nThis project is an intent to provide common steps definitions to make functional testing for REST API, Database setup, external service mocks and HTML pages\r\n\r\nThis is based on [cucumber-jvm](https://github.com/cucumber/cucumber-jvm) project.\r\n\r\nYou need to specify your features in the gherkin language and run it with [cucumber-java](https://github.com/cucumber/cucumber-java-skeleton) or [cukespace](https://github.com/cukespace/cukespace) + [arquillian](http://arquillian.org/)\r\n\r\n\r\nGetting Started\r\n===============\r\n\r\nAdd as dependency in your pom.xml:\r\n\r\n```xml\r\n<dependency>\r\n    <groupId>com.github.cchacin</groupId>\r\n    <artifactId>cucumber-common-steps</artifactId>\r\n    <version>0.0.7</version>\r\n    <scope>test</scope>\r\n</dependency>\r\n```\r\n\r\nWrite your feature in gherkin language in ```src/test/resources```\r\n\r\n\r\n**Steps for Database Setup and verification of Endpoints Results**\r\n\r\nPut your database connection properties in ```src/test/resources/test-db.properties```\r\n\r\n```properties\r\ndatabase.url=jdbc:hsqldb:mem:test\r\ndatabase.driver=org.hsqldb.jdbcDriver\r\ndatabase.user=SA\r\ndatabase.password=\r\n```\r\n\r\n*it should be used in ```Given``` steps to prepare the database*\r\n\r\n```gherkin\r\n  Scenario: Retrieve users list\r\n    Given I have only the following rows in the \"models\" table:\r\n      | id | created             | modified            | email                | fullname | password |\r\n      | 1  | 2014-07-16 00:00:00 | 2014-07-16 00:00:00 | cchacin@superbiz.org | Carlos   | passw0rd |\r\n    When I make a GET call to \"/users\" endpoint\r\n    Then response status code should be \"200\"\r\n    And response content type should be \"application/json\"\r\n    And response should be json:\r\n    \"\"\"\r\n    {\r\n      \"model\":\r\n        [\r\n          {\r\n              \"id\": 1,\r\n              \"created\": \"${json-unit.ignore}\",\r\n              \"modified\": \"${json-unit.ignore}\",\r\n              \"email\": \"cchacin@superbiz.org\",\r\n              \"fullname\": \"Carlos\",\r\n              \"password\": \"passw0rd\"\r\n          }\r\n        ]\r\n    }\r\n    \"\"\"\r\n\r\n  Scenario: Retrieve users list\r\n    Given I have the following rows in the \"models\" table:\r\n      | id | created             | modified            | email                 | fullname | password |\r\n      | 2  | 2015-02-11 00:00:00 | 2015-02-11 00:00:00 | cchacin2@superbiz.org | Carlos2  | passw0rd |\r\n    When I make a GET call to \"/users\" endpoint\r\n    Then response status code should be \"200\"\r\n    And response content type should be \"application/json\"\r\n    And response should be json:\r\n    \"\"\"\r\n    {\r\n      \"model\":\r\n        [\r\n          {\r\n              \"id\": 1,\r\n              \"created\": \"${json-unit.ignore}\",\r\n              \"modified\": \"${json-unit.ignore}\",\r\n              \"email\": \"cchacin@superbiz.org\",\r\n              \"fullname\": \"Carlos\",\r\n              \"password\": \"passw0rd\"\r\n          },\r\n          {\r\n              \"id\": 2,\r\n              \"created\": \"${json-unit.ignore}\",\r\n              \"modified\": \"${json-unit.ignore}\",\r\n              \"email\": \"cchacin2@superbiz.org\",\r\n              \"fullname\": \"Carlos2\",\r\n              \"password\": \"passw0rd\"\r\n          }\r\n        ]\r\n    }\r\n    \"\"\"\r\n```\r\n\r\n**Steps to verify Restful API reponses**\r\n\r\n```gherkin\r\n  Scenario:\r\n    When I make a GET call to \"/zen\" endpoint in host \"https://api.github.com\"\r\n    Then response status code should be \"200\"\r\n    And response content type should be \"text/plain;charset=utf-8\"\r\n\r\n  Scenario:\r\n    When I make a GET call to \"/successful/get\" endpoint\r\n    Then response status code should be \"200\"\r\n    And response content type should be \"application/json\"\r\n    And response header \"a\" should be \"a\";\r\n    And response should be json in file \"/responses/successful.json\"\r\n\r\n  Scenario:\r\n    When I make a GET call to \"/successful/get/csv\" endpoint\r\n    Then response status code should be \"200\"\r\n    And response content type should be \"text/csv\"\r\n    And response should be file \"/responses/sample.csv\"\r\n\r\n  Scenario:\r\n    When I make a GET call to \"/successful/get\" endpoint with header \"Authorization\" with value \"OAuth qwerqweqrqwerqwer\"\r\n    Then response status code should be \"200\"\r\n    And response content type should be \"application/json\"\r\n    And response header \"a\" should be \"a\";\r\n    And response should be json in file \"/responses/successful.json\"\r\n\r\n  Scenario:\r\n    When I make a GET call to \"/successful/get\" endpoint with headers:\r\n      | headerName    | headerValue             |\r\n      | Authorization | OAuth qwerqweqrqwerqwer |\r\n    Then response status code should be \"200\"\r\n    And response content type should be \"application/json\"\r\n    And response header \"a\" should be \"a\";\r\n    And response should be json in file \"/responses/successful.json\"\r\n\r\n  Scenario:\r\n    When I make a GET call to \"/successful/get\" endpoint\r\n    Then response status code should be \"200\"\r\n    And response content type should be \"application/json\"\r\n    And response header \"a\" should be \"a\";\r\n    And response should be json:\r\n    \"\"\"\r\n    {\r\n      \"id\": \"${json-unit.ignore}\",\r\n      \"created\": \"${json-unit.ignore}\",\r\n      \"modified\": \"${json-unit.ignore}\",\r\n      \"password\": \"\",\r\n      \"fullname\": \"\"\r\n    }\r\n    \"\"\"\r\n    \r\n  Scenario:\r\n    When I make a HEAD call to \"/successful/head\" endpoint\r\n    Then response status code should be \"204\"\r\n    And response should be empty\r\n\r\n  Scenario:\r\n    When I make a PUT call to \"/successful/put\" endpoint with post body:\r\n    \"\"\"\r\n    {\r\n    }\r\n    \"\"\"\r\n    Then response status code should be \"204\"\r\n    And response should be empty\r\n\r\n  Scenario:\r\n    When I make a POST call to \"/successful/post\" endpoint with post body:\r\n    \"\"\"\r\n    {\r\n    }\r\n    \"\"\"\r\n    Then response status code should be \"201\"\r\n    And response should be empty\r\n\r\n  Scenario:\r\n    When I make a POST call to \"/successful/post\" endpoint with post body in file \"/requests/post_request.json\"\r\n    Then response status code should be \"201\"\r\n    And response should be empty\r\n\r\n  Scenario:\r\n    When I make a DELETE call to \"/successful/delete\" endpoint\r\n    Then response status code should be \"204\"\r\n    And response should be empty\r\n```\r\n\r\n\r\n*Mocking external API calls*\r\n\r\n```gherkin\r\n  Scenario: Mock external API\r\n    Given The call to external service should be:\r\n      | method | url            | statusCode |\r\n      | GET    | /user/71e7cb11 | 200        |\r\n      | POST   | /user          | 201        |\r\n      | PUT    | /user/71e7cb11 | 204        |\r\n      | DELETE | /user/71e7cb11 | 204        |\r\n    When I make a GET call to \"/external/call/user/71e7cb11\" endpoint\r\n    Then response status code should be \"200\"\r\n    And response should be json:\r\n    \"\"\"\r\n    {\r\n      \"responses\": [\r\n        {\r\n          \"status\": 200\r\n        },\r\n        {\r\n          \"status\": 201\r\n        },\r\n        {\r\n          \"status\": 204\r\n        },\r\n        {\r\n          \"status\": 204\r\n        }\r\n      ]\r\n    }\r\n    \"\"\"\r\n```\r\n\r\nAnd then put the payloads (convention over configuration) in ```src/test/resources/restito```: i.e. ```get.user.71e7cb11.json```\r\n\r\n```json\r\n{\r\n    \"sample\": 21\r\n}\r\n```\r\n\r\nWrite a cucumber integration-test in ```src/test/java```:\r\n\r\n```java\r\n@Glues({RestSteps.class, DatabaseSteps.class})\r\n@Features({\"features/successful-endpoints.feature\"})\r\n@RunWith(ArquillianCucumber.class)\r\npublic class UsersEndpointITest {\r\n}\r\n```\r\n","google":" UA-4142851-5","note":"Don't delete this file! It's used internally to help with page regeneration."}